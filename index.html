<!DOCTYPE html>
<html lang="hy">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üéÇ ’ç’∏’Ω’´ ’ø’°÷Ä’•’§’°÷Ä’± üéÇ</title>

  <link rel="icon" type="image/x-icon" href="images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
  <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="192x192" href="images/favicon-192x192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="images/favicon-512x512.png">
  <meta name="theme-color" content="#333333">
  
  <style>
    html, body {
      margin: 0;
      font-family: "Comic Sans MS", cursive, sans-serif;
      background: url("images/background.jpg") no-repeat center center fixed;
      background-size: cover;
      text-align: center;
      color: #333;
      height: 100%;
      overflow-y: auto;
      overflow-x: hidden;
    }

    .card {
      margin: 30px auto;
      background: rgba(102, 102, 102, 0.3);
      border-radius: 20px;
      padding: 30px;
      width: 100%;
      max-width: 500px;
      box-shadow: 0 0 25px rgba(0,0,0,0.3);
      box-sizing: border-box;
      animation: slideUp 1s ease-out;
    }

    @keyframes slideUp {
      from { opacity: 0; transform: translateY(50px); }
      to { opacity: 1; transform: translateY(0); }
    }

    h1 { color: #dbdbdb; font-size: 2em; }
    h3 { color: #fffff0; font-size: 1.3em; }

    input, select, button {
      font-family: inherit;
    }

    input {
      width: 88%;
      padding: 10px;
      margin: 10px 0;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 16px;
      background: rgba(255, 255, 255, 0.5);
    }

    select {
      width: 93%;
      padding: 10px;
      margin: 10px 0;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 16px;
      background: rgba(255, 255, 255, 0.5);
   }

    button {
      width: 70%;
      padding: 10px;
      margin: 10px 0;
      border-radius: 10px;
      font-size: 16px;
      background: rgba(0, 0, 0, 0.9);
      color: #fff;
      border: none;
      cursor: pointer;
      font-weight: bold;
      transition: 0.3s;
    }

    button:hover { background: rgba(124, 124, 124, 0.9); }

    ::placeholder { color: #000; }

    .popup {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.6);
      z-index: 999;
      justify-content: center;
      align-items: center;
    }
    
    .popup-content {
      background: #fff;
      padding: 20px 30px;
      border-radius: 15px;
      text-align: center;
      max-width: 300px;
      width: 80%;
      box-shadow: 0 0 20px rgba(0,0,0,0.3);
      animation: popIn 0.3s ease;
    }
    
    @keyframes popIn {
      from { transform: scale(0.7); opacity: 0; }
      to   { transform: scale(1); opacity: 1; }
    }
    
    .popup-content p {
      font-size: 1.2em;
      margin-bottom: 15px;
    }
    
    .popup-content button {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      background: #333;
      color: white;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
    }
    
    .popup-content button:hover {
      background: #666;
    }

    .popup.fade-out {
      animation: fadeOut 0.5s forwards;
    }
    
    @keyframes fadeOut {
      from { opacity: 1; }
      to   { opacity: 0; }
    }

    #countdown {
      font-size: 1.3em;
      color: #fff;
      margin: 20px 0;
    }

    /* üéµ (3) –ö–Ω–æ–ø–∫–∞ –º—É–∑—ã–∫–∏ (—Ç–µ–ø–µ—Ä—å —Å–∫—Ä—ã—Ç–∞—è) */
    #music-btn {
      display: none; /* –∫–Ω–æ–ø–∫–∞ —Ç–µ–ø–µ—Ä—å —Å–∫—Ä—ã—Ç–∞ */
    }

    /* üí• –ö–æ–Ω—Ñ–µ—Ç—Ç–∏-—Å–ª–æ–π */
    #confetti-canvas {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 2000;
    }
  </style>
</head>
<body>
  <!-- üéµ (3) –ú—É–∑—ã–∫–∞ -->
  <audio id="bg-music" loop>
    <source src="music/happy_birthday.mp3" type="audio/mpeg">
  </audio>
  <button id="music-btn">üîä ’ä’°÷Ä’•’û’∂÷Ñ</button>

  <!-- üí• Canvas –¥–ª—è –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ -->
  <canvas id="confetti-canvas"></canvas>

  <div id="popup" class="popup">
    <div class="popup-content">
      <p id="popup-message"></p>
      <button onclick="closePopup()">’ì’°’Ø’•’¨</button>
    </div>
  </div>

  <div class="card" id="main-card">
    <h1>’Ñ’•’∂÷Ñ ’∑’∏÷Ç’ø’∏’æ 5 ’ø’°÷Ä’•’Ø’°’∂ ’•’∂÷Ñ</h1>
    <p style="color: #fffff0; font-size: 1.2em;">’ç’´÷Ä’∏’æ ’∞÷Ä’°’æ’´÷Ä’∏÷Ç’¥ ’•’∂÷Ñ ’±’•’¶` <br>’¥’°’Ω’∂’°’Ø÷Å’•’¨’∏÷Ç <b>’ç’∏’Ω’´</b> ’Æ’∂’∂’§’µ’°’∂ ÷á ’¥’°’ø’°’≤’´ ’°÷Ä’°÷Ä’∏’≤’∏÷Ç’©’µ’°’∂’® ÷á ’¥’•’¶ ’∞’•’ø ’Ø’´’Ω’•’¨’∏÷Ç ’°’µ’§ ’Ø’°÷Ä÷á’∏÷Ä ’∏÷Ç ’∞’´’∑’°÷Ä’™’°’∂ ÷Ö÷Ä’®</p>
    <p style="color: #fffff0; font-size: 1.2em;">’ç’´÷Ä’∏’æ ’Ø’Ω’∫’°’Ω’•’∂÷Ñ ’±’•’¶’ù <br><span style="text-align: center;"><b>üìÖ 27 ’Ü’∏’µ’•’¥’¢’•÷Ä’´ 2025<br>üìç ‘ø’´’¨’´’Ø’´’∏ ’£’°÷Ä’§’•’∂ <br>üïï ‘∫’°’¥’® 18:00</span></b></p>
    <p id="countdown"></p>
    <p><a href="https://yandex.com/maps/-/CLBII2kZ" style="color: #fffff0; font-size: 1.2em;"><b>‘ª’∂’π’∫’•’û’Ω ’∞’°’Ω’∂’•’¨</b></a></p>
    <h3 style="font-style: normal;">‘Ω’∂’§÷Ä’∏÷Ç’¥ ’•’∂÷Ñ ’∞’°’Ω’ø’°’ø’•’¨ ’±’•÷Ä ’∞÷Ä’°’æ’•÷Ä’® ’Ω’ø’∏÷Ä÷á</h3>
    <form id="rsvpForm">
      <input type="text" id="name" placeholder="‘±’∂’∏÷Ç’∂ ’°’¶’£’°’∂’∏÷Ç’∂ *"><br>
      <input type="tel" id="phone" placeholder="’Ä’•’º’°’≠’∏’Ω’°’∞’°’¥’°÷Ä * (’ï÷Ä‚Ä§’ù 0XXYYYYYY)" inputmode="tel"><br>
      <input type="number" id="count" placeholder="‘±’∂’±’°’∂÷Å ÷Ñ’°’∂’°’Ø *" inputmode="numeric" min="1"><br>
      <select id="status">
        <option value="" disabled selected hidden>‘∏’∂’ø÷Ä’•’¨ *</option>
        <option value="‘±’µ’∏">’Ñ’•’Æ ’Ω’´÷Ä’∏’æ</option>
        <option value="’à’π">’ë’°’æ’∏÷Ñ ’∏’π</option>
      </select><br>
      <button type="submit">’Ä’°’Ω’ø’°’ø’•’¨</button>
    </form>

    <p id="response"></p>
  </div>

  <script>
  const music = document.getElementById("bg-music");

  /* üéµ (1) –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ª—é–±—ã—Ö –¥–µ–π—Å—Ç–≤–∏—è—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è */
  function tryPlayMusic() {
    music.play().catch(() => {});
  }

  // –°–æ–±—ã—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç –º—É–∑—ã–∫—É
  ["click", "touchstart", "input", "scroll"].forEach(evt => {
    window.addEventListener(evt, tryPlayMusic, { once: true });
  });

  // –ü–æ–ø—ã—Ç–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ —á–µ—Ä–µ–∑ 0.8 —Å–µ–∫ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ (–µ—Å–ª–∏ –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ)
  window.addEventListener("load", () => {
    setTimeout(() => {
      music.play().catch(() => {
        // –ï—Å–ª–∏ –±—Ä–∞—É–∑–µ—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç, –∂–¥—ë–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
        console.log("‚è∏Ô∏è –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω, –∂–¥—ë–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è...");
      });
    }, 800);
  });

  /* üß∏ (7) –°–µ–∫—Ä–µ—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ 5 –∫–ª–∏–∫–∞—Ö –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É */
  let secretClicks = 0;
  document.getElementById("main-card").addEventListener("click", () => {
    secretClicks++;
    if (secretClicks === 5) {
      showPopup("üéâ ’ç’∏’Ω’® ’¥’•’Æ ’Ω’´÷Ä’∏’æ ’Ω’∫’°’Ω’∏÷Ç’¥ ’ß ’±’•’¶ üéâ");
      secretClicks = 0;
    }
    setTimeout(() => secretClicks = 0, 2000);
  });

  /* –¢–∞–π–º–µ—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á—ë—Ç–∞ */
  function startCountdown() {
    const targetDate = new Date("2025-11-27T18:00:00");
    const countdownEl = document.getElementById("countdown");

    function updateCountdown() {
      const now = new Date();
      const diff = targetDate - now;

      if (diff <= 0) {
        countdownEl.innerHTML = "üéâ ’è’∏’∂’°’Ø’°’ø’°÷Ä’∏÷Ç’©’µ’∏÷Ç’∂’® ’Ω’Ø’Ω’æ’•’¨ ’ß üéâ";
        return;
      }

      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
      const minutes = Math.floor((diff / (1000 * 60)) % 60);
      const seconds = Math.floor((diff / 1000) % 60);

      countdownEl.innerHTML = `’Ñ’∂’°÷Å’•’¨ ’ß’ù <b>${days}</b> ÷Ö÷Ä <b>${hours}</b> ’™’°’¥ <b>${minutes}</b> ÷Ä’∏’∫’• <b>${seconds}</b> ’æ’°’µ÷Ä’Ø’µ’°’∂`;
    }

    updateCountdown();
    setInterval(updateCountdown, 1000);
  }
  startCountdown();

  /* –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã */
document.getElementById("rsvpForm").addEventListener("submit", function(e){
  e.preventDefault();

  const name = document.getElementById("name").value.trim();
  let phone = document.getElementById("phone").value.trim();
  const count = document.getElementById("count").value.trim();
  const status = document.getElementById("status").value;

  if (!name || !phone || !count || !status) {
    showPopup("‘Ω’∂’§÷Ä’∏÷Ç’¥ ’•’∂÷Ñ ’¨÷Ä’°÷Å’∂’•’¨ ’¢’∏’¨’∏÷Ä ’∫’°÷Ä’ø’°’§’´÷Ä ’∂’∑’æ’°’Æ ’§’°’∑’ø’•÷Ä’®÷â");
    return;
  }

  // üìû –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã)
  phone = phone.replace(/\D/g, "");

  // –ï—Å–ª–∏ –Ω–æ–º–µ—Ä –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å "0" ‚Äî –ø—Ä–µ–≤—Ä–∞—â–∞–µ–º –≤ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π (374)
  if (phone.startsWith("0")) {
    phone = "374" + phone.slice(1);
  }

  // –ï—Å–ª–∏ –Ω–æ–º–µ—Ä —É–∂–µ —Å +374 ‚Äî –ø—Ä–æ—Å—Ç–æ —É–¥–∞–ª—è–µ–º +
  if (phone.startsWith("3740")) {
    phone = "374" + phone.slice(4);
  }

  const sheetAPI = "https://sheetdb.io/api/v1/73phymm5nctlc";

  // üü¢ –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ —ç—Ç–æ–º—É —Ç–µ–ª–µ—Ñ–æ–Ω—É
  fetch(`${sheetAPI}/search?phone=${encodeURIComponent(phone)}`)
    .then(res => res.json())
    .then(data => {
      if (Array.isArray(data) && data.length > 0) {
        // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
        showPopup(`’Ä’°÷Ä’£’•’¨’´ <b>${name}</b>, ’§’∏÷Ç÷Ñ ’°÷Ä’§’•’∂ ’£÷Ä’°’∂÷Å’æ’°’Æ ’•÷Ñ÷â`);
        document.getElementById("rsvpForm").reset(); // üßπ –û—á–∏—Å—Ç–∏—Ç—å –ø–æ–ª—è
        return;
      }

      // –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –Ω–æ–º–µ—Ä
      return fetch(sheetAPI, {
        method: "POST",
        body: JSON.stringify({
          data: [{ 
            name: name,
            phone: phone,   // üì≤ —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã, –±–µ–∑ +, –ø—Ä–æ–±–µ–ª–æ–≤ –∏ —Ç.–ø.
            count: count,
            status: status
          }]
        }),
        headers: { "Content-Type": "application/json" }
      })
      .then(res => res.json())
      .then(() => {
        showPopup(`’Ä’°÷Ä’£’•’¨’´ <b>${name}</b>, ’§’∏÷Ç÷Ñ ’∞’°’ª’∏’≤’∏÷Ç’©’µ’°’¥’¢ ’£÷Ä’°’∂÷Å’æ’•÷Å’´÷Ñ`);
        document.getElementById("rsvpForm").reset();
        celebrate(); // üí• –ö–æ–Ω—Ñ–µ—Ç—Ç–∏
      });
    })
    .catch(() => {
      showPopup(`’Ä’°÷Ä’£’•’¨’´ <b>${name}</b>, ’£÷Ä’°’∂÷Å’æ’•’¨’∏÷Ç ’®’∂’©’°÷Å÷Ñ’∏÷Ç’¥ ’°’º’°’ª’°÷Å’•’¨ ’ß ’≠’∂’§’´÷Ä, ’≠’∂’§÷Ä’∏÷Ç’¥ ’•’∂÷Ñ ÷É’∏÷Ä’±’•÷Ñ ’Ø÷Ä’Ø’´’∂`);
    });
});

    /* üí• –£–ª—É—á—à–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–µ—Ç—Ç–∏-–∞–Ω–∏–º–∞—Ü–∏—è —Å –∞–≤—Ç–æ–∑–∞—Ç—É—Ö–∞–Ω–∏–µ–º */
  function celebrate() {
    const canvas = document.getElementById("confetti-canvas");
    const ctx = canvas.getContext("2d");
    const confetti = [];

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const shapes = ["circle", "square", "triangle", "ribbon"];
    let opacity = 1.0; // –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è

    // üé® –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —á–∞—Å—Ç–∏—Ü –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
    for (let i = 0; i < 180; i++) {
      confetti.push({
        x: Math.random() * canvas.width,
        y: Math.random() * -canvas.height,
        r: Math.random() * 6 + 4,
        d: Math.random() * 0.5 + 0.5,
        color: `hsl(${Math.random() * 360}, 100%, 60%)`,
        tilt: Math.random() * 10 - 5,
        tiltAngle: 0,
        tiltAngleIncrement: (Math.random() * 0.07) + 0.02,
        shape: shapes[Math.floor(Math.random() * shapes.length)],
        rotation: Math.random() * 360,
        rotationSpeed: Math.random() * 5 - 2.5,
      });
    }

    // üñåÔ∏è –†–∏—Å—É–µ–º –∫–∞–∂–¥—É—é —á–∞—Å—Ç–∏—Ü—É
    function drawConfetti(c) {
      ctx.save();
      ctx.translate(c.x, c.y);
      ctx.rotate((c.rotation * Math.PI) / 180);
      ctx.globalAlpha = opacity;
      ctx.fillStyle = c.color;

      switch (c.shape) {
        case "circle":
          ctx.beginPath();
          ctx.arc(0, 0, c.r, 0, Math.PI * 2);
          ctx.fill();
          break;
        case "square":
          ctx.fillRect(-c.r / 2, -c.r / 2, c.r, c.r);
          break;
        case "triangle":
          ctx.beginPath();
          ctx.moveTo(0, -c.r);
          ctx.lineTo(c.r, c.r);
          ctx.lineTo(-c.r, c.r);
          ctx.closePath();
          ctx.fill();
          break;
        case "ribbon":
          ctx.beginPath();
          ctx.ellipse(0, 0, c.r * 1.5, c.r / 3, 0, 0, Math.PI * 2);
          ctx.fill();
          break;
      }

      ctx.restore();
    }

    // üîÑ –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏–∏ –∏ –≤—Ä–∞—â–µ–Ω–∏—è
    function updateConfetti() {
      for (let i = 0; i < confetti.length; i++) {
        const c = confetti[i];
        c.y += c.d * 7;
        c.x += Math.sin(c.tiltAngle) * 2;
        c.tiltAngle += c.tiltAngleIncrement;
        c.rotation += c.rotationSpeed;

        if (c.y > canvas.height + 20) {
          c.y = -10;
          c.x = Math.random() * canvas.width;
        }
      }
    }

    // üåÄ –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –∞–Ω–∏–º–∞—Ü–∏–∏
    let animationFrame;
    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      confetti.forEach(drawConfetti);
      updateConfetti();
      animationFrame = requestAnimationFrame(animate);
    }

    animate();

    // ‚è≥ –ß–µ—Ä–µ–∑ 7 —Å–µ–∫—É–Ω–¥ ‚Äî –ø–ª–∞–≤–Ω–æ–µ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ
    setTimeout(() => {
      const fade = setInterval(() => {
        opacity -= 0.05;
        if (opacity <= 0) {
          clearInterval(fade);
          cancelAnimationFrame(animationFrame);
          ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
      }, 100);
    }, 7000);
  }

  /* üéµ (2) –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º—É–∑—ã–∫—É –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏/–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤–∫–ª–∞–¥–∫–∏ */
  window.addEventListener("beforeunload", () => {
    music.pause();
    music.currentTime = 0;
  });

  document.addEventListener("visibilitychange", () => {
    if (document.hidden) {
      music.pause();
      music.currentTime = 0;
    }
  });

  /* Popup */
  function showPopup(message) {
    const popup = document.getElementById("popup");
    document.getElementById("popup-message").innerHTML = message;

    popup.style.display = "flex";
    popup.classList.remove("fade-out");

    setTimeout(() => {
      popup.classList.add("fade-out");
      setTimeout(() => {
        popup.style.display = "none";
      }, 500);
    }, 4500);
  }

  function closePopup() {
    const popup = document.getElementById("popup");
    popup.classList.add("fade-out");
    setTimeout(() => { popup.style.display = "none"; }, 500);
  }
</script>
</body>
</html>



